rules_version = '2';

service cloud.firestore {
match /databases/{database}/documents {
// Students can be read by anyone (for the result check)
// but only created, updated, or deleted by authenticated admins.
match /students/{studentId} {
allow read: if true;
allow write: if request.auth != null;
}

// Results can be read by anyone, but only written by admins.
match /results/{studentId} {
  allow read: if true;
  allow write: if request.auth != null;
}

// Announcements can be read by anyone, but only written by admins.
match /announcements/{announcementId} {
  allow read: if true;
  allow write: if request.auth != null;
}

// UPDATED: School settings can be read by anyone but only
// written by authenticated admins. This fixes the save settings error.
match /settings/schoolDetails {
  allow read: if true;
  allow write: if request.auth != null;
}

}
}
